<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S3 GUI</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Profiles</h2>
        <button id="add-profile-btn" class="btn btn-icon" title="Add Profile">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
          </svg>
        </button>
      </div>
      <ul id="profiles-list" class="profiles-list">
        <!-- Profile items will be rendered here -->
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="main-header">
        <div class="bucket-selector">
          <label for="bucket-select">Bucket:</label>
          <select id="bucket-select" class="select">
            <option value="">Select a bucket</option>
          </select>
          <button id="refresh-buckets-btn" class="btn btn-icon" title="Refresh buckets">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
              <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
            </svg>
          </button>
        </div>
        <div class="path-nav">
          <button id="go-back-btn" class="btn btn-icon" title="Go to parent folder" disabled>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M14.5 8a.5.5 0 0 1-.5.5H3.707l4.147 4.146a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 1 1 .708.708L3.707 7.5H14a.5.5 0 0 1 .5.5z"/>
            </svg>
          </button>
          <div class="current-path" id="current-path"></div>
          <button id="refresh-objects-btn" class="btn btn-icon" title="Refresh objects">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
              <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- Toolbar -->
      <div class="toolbar">
        <button id="upload-files-btn" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
          </svg>
          Upload Files
        </button>
        <button id="upload-folder-btn" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v7a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 12.5v-9z"/>
          </svg>
          Upload Folder
        </button>
        <button id="create-bucket-btn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
          </svg>
          Create Bucket
        </button>
        <button id="create-folder-btn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M.5 3l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9.5a.5.5 0 0 0 0-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8.5a.5.5 0 0 0 .998.09l.265-2.91A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
            <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
          </svg>
          Create Folder
        </button>
        <div class="toolbar-spacer"></div>
        <div class="search-box">
          <svg class="search-icon" width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
          <input type="text" id="search-prefix" class="input search-input" placeholder="Search by prefix...">
          <button id="search-clear-btn" class="btn btn-icon search-clear hidden" title="Clear search">
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg>
          </button>
        </div>
        <button id="sync-btn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
          </svg>
          Sync
        </button>
        <button id="keep-sync-btn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
          </svg>
          KeepSync
        </button>
        <div class="toolbar-spacer"></div>
        <div class="view-toggle">
          <button id="list-view-btn" class="btn btn-icon active" title="List View">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
            </svg>
          </button>
          <button id="grid-view-btn" class="btn btn-icon" title="Grid View">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Object List View -->
      <div class="object-list-container" id="list-view">
        <table class="object-table" id="object-table">
          <thead>
            <tr>
              <th class="col-name">Name</th>
              <th class="col-size">Size</th>
              <th class="col-modified">Last Modified</th>
              <th class="col-actions">Actions</th>
            </tr>
          </thead>
          <tbody id="object-list">
            <!-- Object rows will be rendered here -->
          </tbody>
        </table>
        <div class="empty-state" id="empty-state-list">
          <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" opacity="0.5">
            <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
            <path d="M5 8a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 5 8z"/>
          </svg>
          <p>No objects found</p>
        </div>
      </div>

      <!-- Object Grid View -->
      <div class="object-grid-container hidden" id="grid-view">
        <div class="object-grid" id="object-grid">
          <!-- Grid items will be rendered here -->
        </div>
        <div class="empty-state" id="empty-state-grid">
          <svg width="48" height="48" viewBox="0 0 16 16" fill="currentColor" opacity="0.5">
            <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
            <path d="M5 8a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5A.5.5 0 0 1 5 8z"/>
          </svg>
          <p>No objects found</p>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <button id="prev-page-btn" class="btn btn-icon" title="Previous Page" disabled>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
          </svg>
        </button>
        <span id="page-info" class="page-info"></span>
        <button id="next-page-btn" class="btn btn-icon" title="Next Page" disabled>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
    </main>

    <!-- Task Panel -->
    <aside class="task-panel hidden" id="task-panel">
      <div class="task-panel-header">
        <h3>Tasks</h3>
        <div class="task-panel-actions">
          <button id="clear-completed-btn" class="btn btn-small btn-secondary" title="Clear completed">Clear</button>
          <button id="close-task-panel-btn" class="btn btn-icon btn-small" title="Close">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="task-progress-container" id="task-progress-container">
        <div class="task-progress-info">
          <span id="task-progress-text">0 / 0 completed</span>
        </div>
        <div class="task-progress-bar">
          <div class="task-progress-fill" id="task-progress-fill"></div>
        </div>
      </div>
      <div class="task-list" id="task-list">
        <!-- Task items will be rendered here -->
      </div>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer" id="footer">
    <div class="footer-toggle" id="footer-toggle">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
      </svg>
      <span>Output</span>
    </div>
    <div class="footer-content">
      <div class="footer-section">
        <label for="presigned-url">Presigned URL:</label>
        <div class="url-container">
          <textarea id="presigned-url" class="textarea" readonly rows="3" placeholder="Presigned URL will appear here..."></textarea>
          <button id="copy-url-btn" class="btn btn-secondary btn-small" title="Copy URL">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
              <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
            </svg>
            Copy
          </button>
        </div>
      </div>
      <div class="footer-section">
        <label>Errors:</label>
        <div id="error-list" class="error-list">
          <!-- Error messages will be rendered here -->
        </div>
      </div>
    </div>
  </footer>

  <!-- Profile Editor Modal -->
  <div class="modal" id="profile-modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="profile-modal-title">Add Profile</h3>
        <button class="btn btn-icon modal-close" data-modal="profile-modal">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="profile-form">
          <input type="hidden" id="profile-id">
          <div class="form-group">
            <label for="profile-name">Profile Name</label>
            <input type="text" id="profile-name" class="input" required placeholder="My S3 Profile">
          </div>
          <div class="form-group">
            <label for="profile-endpoint">Endpoint URL (optional for AWS)</label>
            <input type="text" id="profile-endpoint" class="input" placeholder="https://s3.amazonaws.com or leave empty for AWS">
          </div>
          <div class="form-group">
            <label for="profile-region">Region</label>
            <input type="text" id="profile-region" class="input" required placeholder="us-east-1">
          </div>
          <div class="form-group">
            <label for="profile-access-key">Access Key ID</label>
            <input type="text" id="profile-access-key" class="input" required placeholder="AKIAIOSFODNN7EXAMPLE">
          </div>
          <div class="form-group">
            <label for="profile-secret-key">Secret Access Key</label>
            <input type="password" id="profile-secret-key" class="input" required placeholder="••••••••••••••••">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close" data-modal="profile-modal">Cancel</button>
        <button class="btn btn-danger" id="delete-profile-btn" style="display: none;">Delete</button>
        <button class="btn btn-primary" id="save-profile-btn">Save</button>
      </div>
    </div>
  </div>

  <!-- Create Bucket Modal -->
  <div class="modal" id="bucket-modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create Bucket</h3>
        <button class="btn btn-icon modal-close" data-modal="bucket-modal">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="bucket-form">
          <div class="form-group">
            <label for="bucket-name">Bucket Name</label>
            <input type="text" id="bucket-name" class="input" required placeholder="my-new-bucket">
            <span class="form-hint">Bucket names must be lowercase and can contain hyphens.</span>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close" data-modal="bucket-modal">Cancel</button>
        <button class="btn btn-primary" id="create-bucket-submit-btn">Create</button>
      </div>
    </div>
  </div>

  <!-- Create Folder Modal -->
  <div class="modal" id="folder-modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create Folder</h3>
        <button class="btn btn-icon modal-close" data-modal="folder-modal">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form id="folder-form">
          <div class="form-group">
            <label for="folder-name">Folder Name</label>
            <input type="text" id="folder-name" class="input" required placeholder="my-folder">
            <span class="form-hint">Folder name cannot contain leading or trailing slashes.</span>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close" data-modal="folder-modal">Cancel</button>
        <button class="btn btn-primary" id="create-folder-submit-btn">Create</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal" id="delete-modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h3>Confirm Delete</h3>
        <button class="btn btn-icon modal-close" data-modal="delete-modal">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p id="delete-message">Are you sure you want to delete this item?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close" data-modal="delete-modal">Cancel</button>
        <button class="btn btn-danger" id="confirm-delete-btn">Delete</button>
      </div>
    </div>
  </div>

  <!-- Media Preview Modal -->
  <div class="modal" id="preview-modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="preview-title">Preview</h3>
        <button class="btn btn-icon modal-close" data-modal="preview-modal">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="preview-container" id="preview-container">
          <!-- Preview content will be rendered here -->
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="src/main.ts"></script>
</body>
</html>
